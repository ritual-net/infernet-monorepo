# EZKL Proof Service

A service that generates zero knowledge proofs of inference for a given model based on the [EZKL library](https://ezkl.xyz/).

Generating proofs is a step lifecycle:
* setup - prepare artifacts necessary for proof generation. This includes fixed artifacts such as the compiled model circuit and cryptographic keys, as well as dynamic artifacts such as the witness that is generated based on the model input.
* prove - a proof is generated based on the provided artifacts that allows for verification given the verification keys. The EZKL Proof Service is mainly concerned with this stage of the lifecycle.
* verify - the proof output can be independently verified at this stage

The fixed proving artifacts for the model are downloaded on startup. For more information on the proof implementation and limitations, see [EZKL](https://github.com/zkonduit/ezkl).

For offchain job targets, the proof json is returned as a payload, allowing for offchain verification.

For onchain job targets, a 5 element dictionary containing the raw input / processed input / raw output / processed output / proof calldata is returned. This allows onchain applications to optionally provide data attestation as part of the proof verification should the appropriate contract be deployed - see the [example notebook here](https://github.com/zkonduit/ezkl/blob/main/examples/notebooks/data_attest.ipynb) for details on
how to generate an on chain attestation contract.

# Endpoint

Infernet services are expected to implement a `/service_output` endpoint that accepts a json payload and conforms to the `InfernetInput` model. For more information on Infernet-compatible containers, refer to [our docs](https://docs.ritual.net/infernet/node/containers).


## Input
### data field (offchain)

#### service specific data schema
The address vk field is not required by default and is mostly necessary for onchain job workflows that are using a seperate verifying key contract. See (EZKL documentation)[https://github.com/zkonduit/ezkl/blob/main/src/python.rs#L1493] for more info.

The shape of the witness input data and output data is dependent on the proving artifacts (i.e. the model input and output and proof settings). We use the infernet-ml library for encoding and decoding vectors, which requires the specification of a shape, DataType, and flattened array of data for each vector.

An Example offchain request:

```json
{
    "source": 1,
    "data": {
            "address_vk": null,
            "witness_data": {
                "input_data": [
                    [
                        0.052521463483572006,
                        0.04962930083274841,
                        0.0025634586345404387,
                        0.06335366517305374,
                    ]
                ],
                "input_shape": [1, 4],
                "input_dtype": 0,
                "output_data": [
                    [
                        0.013130365870893002,
                    ]
                ],
                "output_shape": [1, 1],
                "output_dtype": 0,
            }
        },
}
```

#### data field (chain)

The shape of onchain data depends on whether there is
* a vk address - the address of an seperate verifying key contract. (optional)
* witness input data - vector input data of the witness. Optional - can be empty if data obtained onchain.
* witness output data - vector output data of the witness. Optional - can be empty if data obtained onchain.

Example python code using the eth-abi API where only witness input / output data specified :
```python
output_dtype = input_dtype = DataType.float
input_shape = [1, 3]
input_data = [1.3234234, 2.234242, 13.23234]
output_shape = [1, 1]
output_data = [2.2342]

data_bytes = encode(
    ["bool", "bool", "bool", "bytes", "bytes"],
    [
        False,
        True,
        True,
        encode_vector(input_dtype, input_shape, input_data),
        encode_vector(output_dtype, output_shape, output_data),
    ],
)

data = data_bytes.hex()
```
Example json input:

```python
{
    "source": 0,
    "data" : "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000003fa965f000000000000000000000000000000000000000000000000000000000400efdd2000000000000000000000000000000000000000000000000000000004153b7aa00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000400efd22"
}
```

## Output (Offchain)
The data returned proof json.

```json
{"protocol":null,"instances":[["39b2b61a4ab0f70f8be3aaa0e29cd71f0b9262328fddee1d7eacff26cbc5b10b"]],"proof":[9,80,34,152,183,169,38,63,202,157,103,52,73,42,176,10,236,142,141,83,176,2,91,165,212,202,72,153,203,189,1,198,8,212,7,129,69,122,205,146,142,12,150,175,134,218,115,181,105,203,25,175,161,71,22,86,60,6,16,191,3,172,136,146,16,91,87,118,248,165,128,68,112,117,65,131,213,5,17,88,250,21,107,95,178,98,18,192,251,145,198,171,4,67,61,77,17,203,245,135,198,15,66,247,84,50,71,187,188,219,59,184,168,79,102,204,103,183,120,183,154,223,6,234,52,241,78,251,18,239,32,161,177,137,255,56,1,39,43,158,170,226,235,197,57,147,61,139,81,91,251,215,110,222,34,241,148,170,223,190,18,6,223,189,147,27,125,143,98,240,14,138,16,84,13,24,210,137,106,61,206,110,242,28,183,241,216,250,10,190,117,215,6,68,12,105,246,95,227,57,248,245,118,9,26,91,50,207,224,168,179,63,53,181,135,147,222,101,205,30,64,127,68,4,30,128,51,250,168,238,231,53,232,226,29,133,13,177,145,132,135,174,188,254,184,40,181,208,6,145,186,189,63,186,199,201,38,20,118,67,193,103,176,16,183,68,158,217,146,184,207,63,128,85,141,195,7,18,109,166,240,2,233,79,199,185,195,194,38,208,39,155,56,88,139,15,185,189,140,89,55,112,87,56,130,228,166,213,247,88,207,91,108,252,57,134,220,181,155,89,37,5,42,49,207,38,155,235,147,225,227,150,120,38,49,91,186,81,224,137,228,254,80,140,237,154,188,112,172,47,237,22,24,8,34,185,178,182,168,25,245,142,120,89,1,47,173,94,195,61,242,93,92,152,244,138,243,57,208,111,227,78,79,205,6,132,219,130,41,130,195,146,236,70,238,198,219,49,166,67,125,179,226,203,182,76,178,154,80,162,191,235,225,147,83,51,6,242,73,205,102,251,99,203,16,174,126,106,175,46,63,41,228,191,50,30,81,214,147,52,245,149,51,210,21,252,15,24,47,255,176,102,6,162,155,217,37,18,67,5,128,26,208,206,91,167,23,247,210,211,237,174,150,60,196,102,9,112,226,106,21,46,206,57,55,155,92,218,195,157,174,163,26,117,128,134,194,136,166,90,252,141,160,132,61,112,171,77,34,120,201,165,9,39,206,80,199,146,18,205,58,47,182,130,211,91,235,16,165,184,184,220,123,251,59,1,47,211,48,181,27,69,25,96,37,129,104,117,122,96,6,147,3,230,252,138,167,234,110,147,156,50,144,16,146,2,213,184,193,37,3,220,18,248,162,175,29,179,199,255,121,128,176,165,185,90,171,210,90,33,111,140,194,32,158,136,234,250,97,201,196,139,167,88,205,81,186,32,16,78,227,37,52,96,248,9,92,186,51,33,51,130,136,251,110,135,170,39,10,244,122,75,247,102,123,243,128,82,253,222,40,159,78,235,215,112,154,86,183,30,239,13,253,111,5,192,197,54,32,239,15,198,60,183,198,231,21,72,65,102,62,82,47,179,73,139,250,232,253,88,49,137,33,60,184,133,122,57,180,47,208,17,228,155,131,116,65,226,245,117,240,13,60,214,6,195,35,39,175,42,243,255,96,32,232,0,118,176,191,185,100,236,106,219,224,228,60,235,71,174,211,29,24,192,112,44,5,184,146,119,124,144,253,99,143,13,161,216,183,254,221,214,92,210,145,12,104,101,121,164,222,67,199,247,57,52,9,57,20,63,16,248,24,199,103,253,63,203,210,213,65,127,113,35,210,7,137,82,164,149,179,6,72,43,16,92,144,210,213,34,9,95,47,108,187,226,183,150,89,198,99,70,158,90,38,247,186,52,85,157,15,196,0,200,55,4,216,52,175,47,199,35,21,132,70,222,8,97,165,200,7,125,17,183,228,131,242,242,119,162,225,191,197,160,217,48,66,51,80,67,239,26,118,175,7,231,23,9,49,126,172,160,21,224,120,153,189,9,53,40,16,204,11,55,212,210,59,79,77,183,84,249,207,248,189,77,27,254,89,208,248,219,245,141,37,190,97,117,132,194,103,10,9,158,143,32,50,115,109,214,184,231,104,15,187,25,208,57,6,181,141,107,42,197,189,230,120,11,210,30,58,169,127,96,54,33,57,42,147,156,243,144,100,24,82,128,41,242,102,58,22,47,93,21,107,179,97,117,153,245,210,52,15,109,51,159,128,90,87,193,118,170,35,219,196,50,30,184,224,171,76,137,26,184,195,206,204,152,73,237,76,158,226,7,253,110,99,83,81,99,201,14,169,167,73,193,73,197,212,38,230,214,23,16,11,251,161,114,223,108,188,212,30,0,245,179,178,42,245,221,129,146,196,136,50,44,80,82,82,241,0,1,230,10,55,88,15,47,130,201,110,96,251,221,198,40,243,194,151,217,173,191,0,20,184,147,12,229,50,231,252,74,147,75,4,247,85,153,41,79,25,209,241,14,145,212,123,1,9,188,69,64,9,193,52,129,90,12,243,179,140,191,96,39,95,37,247,232,147,61,30,222,248,10,231,194,237,95,209,103,154,27,65,115,91,141,191,73,194,104,126,18,112,123,242,173,22,99,73,215,188,183,37,118,150,204,248,237,85,93,208,115,56,95,186,13,253,197,8,237,254,212,90,26,179,127,91,227,23,15,22,254,31,239,13,204,50,6,185,91,190,239,233,67,119,41,219,3,189,160,143,53,6,129,100,102,73,21,198,216,97,185,185,96,95,202,47,171,228,7,61,71,104,178,197,74,243,68,69,241,74,25,230,237,21,18,135,76,183,151,106,68,190,248,250,186,192,80,6,204,105,187,234,203,14,31,185,117,105,172,235,254,228,184,217,153,247,147,56,107,247,23,91,77,234,110,225,0,195,244,39,255,245,118,230,69,243,196,32,104,173,217,26,174,122,134,61,51,163,161,76,126,216,246,23,230,54,141,119,133,92,31,15,70,90,122,143,251,7,182,89,156,152,190,168,30,191,36,187,4,90,49,180,165,91,251,202,232,19,185,54,173,23,70,41,107,196,189,118,118,240,237,15,212,251,93,177,148,253,21,120,30,254,142,245,156,60,124,67,228,109,229,139,82,196,41,4,189,157,216,25,45,200,163,213,159,199,24,130,151,254,183,241,127,183,249,82,122,147,190,166,159,185,58,80,191,168,35,2,161,65,161,134,64,220,141,76,57,125,222,69,3,63,131,94,64,57,97,110,117,83,76,119,57,191,104,239,197,104,213,38,80,79,146,16,132,231,129,162,104,105,193,189,255,142,224,243,237,217,239,239,144,86,122,201,148,151,117,22,7,209,196,41,105,163,242,217,164,96,153,41,253,149,230,41,32,108,81,115,146,25,60,39,236,86,139,111,183,148,104,87,150,50,132,44,176,152,231,209,50,148,107,107,137,236,1,84,255,232,167,84,107,238,112,204,50,125,172,107,162,64,62,18,44,103,12,39,48,4,107,98,44,69,42,35,167,166,167,3,196,67,9,155,170,220,157,56,139,18,115,0,213,69,90,142,145,33,242,5,218,114,82,109,193,76,153,7,134,80,234,212,128,251,140,160,242,138,162,25,44,235,167,204,178,39,26,18,212,94,146,24,70,183,247,164,121,13,129,219,0,234,33,70,46,44,91,144,160,10,52,22,164,88,97,201,144,84,206,179,30,162,54,47,80,98,213,228,87,197,113,154,151,149,115,210,72,146,10,27,23,245,93,5,201,16,236,174,186,44,181,96,241,2,136,40,8,95,90,249,197,40,146,65,208,216,192,140,86,16,24,137,85,218,73,232,232,206,166,153,130,124,201,131,88,12,74,28,249,147,160,98,18,253,100,176,192,217,251,100,34,138,58,29,126,75,59,104,196,184,94,142,196,146,249,47,77,67,85,13,214,87,56,15,153,198,18,227,161,221,187,179,109,227,44,14,239,138,26,2,38,248,91,197,245,126,179,3,72,191,227,25,251,249,4,134,41,106,190,189,108,248,110,203,118,221,104,154,136,162,70,38,186,128,250,231,12,42,173,40,58,163,195,17,213,191,54,95,125,222,117,114,100,231,248,112,161,108,90,78,82,131,243,32,179,127,156,80,172,250,11,125,51,193,250,38,85,175,167,91,90,189,201,234,147,188,88,149,220,87,152,92,188,69,106,124,43,133,12,30,65,11,110,67,124,88,40,24,214,254,241,126,191,107,91,86,120,72,112,72,121,70,134,164,89,248,102,26,138,99,168,193,29,145,14,176,226,198,179,5,98,165,196,99,152,174,114,177,23,187,135,252,46,228,212,48,194,42,242,157,84,172,12,168,240,33,41,149,133,171,120,6,175,110,241,200,231,236,182,109,150,78,31,71,128,231,91,0,117,110,239,8,70,72,170,8,167,84,72,184,241,61,205,24,102,197,139,234,79,216,58,119,47,128,14,253,32,239,31,48,226,123,130,165,12,193,241,214,55,229,3,32,4,142,44,22,228,51,31,179,231,31,193,184,99,210,185,185,27,200,138,18,83,99,83,74,236,189,104,90,107,233,102,68,146,58,158,27,156,8,149,210,141,173,115,224,100,89,87,196,209,74,201,58,200,212,45,128,59,255,79,19,178,76,179,89,65,232,12,8,15,8,177,61,164,64,106,102,170,43,234,190,71,24,30,77,155,218,21,170,8,243,135,197,40,122,157,246,248,82,38,20,2,183,205,46,180,203,174,17,53,126,92,119,66,59,170,112,81,249,200,134,116,164,171,245,125,197,1,182,62,30,161,7,58,73,61,199,123,177,215,244,177,255,181,172,63,61,175,192,39,108,192,205,73,141,160,242,38,229,60,103,63,14,161,39,81,14,14,92,76,227,216,252,15,142,96,77,176,68,171,225,3,148,227,238,142,43,39,235,192,182,22,187,182,196,181,16,103,239,151,25,89,66,72,19,2,237,140,32,13,251,62,220,46,149,229,208,222,138,169,110,198,190,232,115,106,190,31,25,178,74,211,198,70,32,113,77,249,62,119,255,58,203,135,145,60,183,143,24,154,187,205,236,237,253,10,247,161,126,64,46,95,223,33,87,255,60,249,244,227,69,181,120,142,81,166,193,46,66,18,11,167,200,17,50,148,113,235,89,87,114,125,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,126,161,79,243,82,214,4,199,52,6,144,164,50,18,189,132,93,89,89,10,193,78,158,111,80,120,234,250,90,75,145,26,23,66,38,212,166,127,28,102,137,52,202,201,182,7,131,133,169,137,234,94,29,7,175,20,241,71,21,78,193,84,37,46,125,238,73,250,165,139,65,36,198,68,100,230,89,220,11,61,31,123,102,2,75,145,110,170,54,8,130,124,252,225,146,5,255,226,27,115,173,49,56,243,249,52,211,100,219,52,83,190,214,212,24,136,125,100,37,117,72,150,124,50,141,14,12,30,88,67,184,230,160,168,245,60,156,133,13,79,6,88,3,149,73,182,175,206,73,145,192,215,189,92,115,182,199,178,227,24,118,25,164,30,222,142,71,99,148,75,152,99,243,75,53,229,237,239,29,251,242,255,89,247,91,128,83,136,27,98,226,37,99,27,130,150,155,150,247,199,160,54,95,41,237,136,166,200,254,218,29,174,208,216,33,222,228,126,177,173,186,131,148,31,84,134,115,228,216,128,226,201,185,103,239,8,125,59,216,208,164,71,117,111,89,47,184,181,212,191,30,40,211,175,0,31,52,29,90,21,17,137,196,136,125,6,237,17,136,246,28,129,55,215,27,220,209,16,233,47,5,233,105,244,36,201,74,48,91,128,138,40,142,231,176,78,136,91,229,62,226,234,109,123,116,208,104,135,94,205,104,187,190,211,184,183,212,37,183,16,119,130,90,251,18,184,133,215,66,124,38,43,155,210,47,30,12,127,137,35,63,145,11,236,14,93,254,99,111,23,103,16,222,223,95,249,115,52,136,212,255,136,222,50,177,157,87,49,60,36,136,242,70,122,252,133,17,150,32,140,179,185,15,33,49,81,72,237,199,157,203,236,195,156,147,66,230,174,132,244,110,236,17,15,115,13,234,253,155,88,63,242,237,137,127,11,237,113,17,23,234,242,205,43,184,217,67,122,224,136,92,79,123,214,138,235,111,233,209,181,246,198,3,23,147,42,116,21,3,180,217,6,189,212,154,229,33,177,198,61,34,223,174,179,126,22,250,80,19,160,164,189,105,221,160,79,154,61,217,21,253,46,231,86,32,197,157,22,151,194,59,132,154,19,147,216,88,116,140,244,149,74,254,58,130,48,167,180,112,141,62,17,184,12,167,90,49,134,114,150,16,203,203,31,69,101,248,145,245,169,143,39,171,196,53,67,36,221,184,71,69,80,125,31,71,195,16,255,156,178,229,219,235,59,89,233,30,0,241,226,127,62,9,63,53,20,229,76,226,228,145,72,87,55,188,38,205,56,70,9,246,68,115,64,83,42,53,129,231,230,240,153,126,166,196,155,133,9,211,52,242,159,72,85,218,6,74,6,102,241,7,177,9,99,113,95,42,121,10,32,133,89,150,51,250,175,31,54,18,149,218,169,152,85,238,240,52,39,247,45,151,197,100,135,37,101,178,223,192,27,16,21,36,187,77,237,41,157,200,239,129,45,156,64,169,171,184,130,87,39,193,17,175,196,224,69,103,216,144,228,171,93,220,224,161,182,96,62,158,105,107,72,54,147,168,249,122,207,5,202,157,161,178,5,255,242,32,20,100,244,187,76,252,95,163,167,12,20,50,61,222,139,249,34,203,86,172,155,138,23,125,160,131,49,108,16,107,113,90,249,139,172,102,237,237,179,151,5,83,204,90,245,238,142,202,73,60,8,83,246,207,231,153,226,0,198,83,0,138,11,12,88,99,147,9,249,248,68,209,58,66,241,152,200,228,60,62,111,133,103,180,78,232,194,208,39,133,187,114,19,152,251,245,84,38,49,251,79,158,126,218,44,101,10,4,53,132,201,255,121,48,243,66,165,255,243,30,83,102,160,3,1,130,232,55,130,31,252,178,243,78,206,50,217,75,114,32,178,201,5,74,162,150,138,147,24,195,108,183,36,39,18,59,15,178,137,227,223,103,222,34,204,67,118,249,18,177,183,201,232,103,162,190,1,85,69,85,127,45,118,67,0,199,73,173,38,144,96,10,123,197,186,162,208,71,177,97,34,71,109,188,127,138,255,128,127,1,249,90,239,39,172,178,132,237,169,202,1,115,253,77,178,166,130,6,250,72,84,195,7,159,111,205,31,10,199,214,160,232,12,181,33,150,43,66,205,244,23,182,39,126,172,55,50,24,184,187,214,56,111,11,20,95,204,181,224,242,248,150,205,134,30,147,89,225,101,63,245,211,186,75],"hex_proof":"0x09502298b7a9263fca9d6734492ab00aec8e8d53b0025ba5d4ca4899cbbd01c608d40781457acd928e0c96af86da73b569cb19afa14716563c0610bf03ac8892105b5776f8a5804470754183d5051158fa156b5fb26212c0fb91c6ab04433d4d11cbf587c60f42f7543247bbbcdb3bb8a84f66cc67b778b79adf06ea34f14efb12ef20a1b189ff3801272b9eaae2ebc539933d8b515bfbd76ede22f194aadfbe1206dfbd931b7d8f62f00e8a10540d18d2896a3dce6ef21cb7f1d8fa0abe75d706440c69f65fe339f8f576091a5b32cfe0a8b33f35b58793de65cd1e407f44041e8033faa8eee735e8e21d850db1918487aebcfeb828b5d00691babd3fbac7c926147643c167b010b7449ed992b8cf3f80558dc307126da6f002e94fc7b9c3c226d0279b38588b0fb9bd8c593770573882e4a6d5f758cf5b6cfc3986dcb59b5925052a31cf269beb93e1e3967826315bba51e089e4fe508ced9abc70ac2fed16180822b9b2b6a819f58e7859012fad5ec33df25d5c98f48af339d06fe34e4fcd0684db822982c392ec46eec6db31a6437db3e2cbb64cb29a50a2bfebe193533306f249cd66fb63cb10ae7e6aaf2e3f29e4bf321e51d69334f59533d215fc0f182fffb06606a29bd925124305801ad0ce5ba717f7d2d3edae963cc4660970e26a152ece39379b5cdac39daea31a758086c288a65afc8da0843d70ab4d2278c9a50927ce50c79212cd3a2fb682d35beb10a5b8b8dc7bfb3b012fd330b51b451960258168757a60069303e6fc8aa7ea6e939c3290109202d5b8c12503dc12f8a2af1db3c7ff7980b0a5b95aabd25a216f8cc2209e88eafa61c9c48ba758cd51ba20104ee3253460f8095cba3321338288fb6e87aa270af47a4bf7667bf38052fdde289f4eebd7709a56b71eef0dfd6f05c0c53620ef0fc63cb7c6e7154841663e522fb3498bfae8fd583189213cb8857a39b42fd011e49b837441e2f575f00d3cd606c32327af2af3ff6020e80076b0bfb964ec6adbe0e43ceb47aed31d18c0702c05b892777c90fd638f0da1d8b7feddd65cd2910c686579a4de43c7f739340939143f10f818c767fd3fcbd2d5417f7123d2078952a495b306482b105c90d2d522095f2f6cbbe2b79659c663469e5a26f7ba34559d0fc400c83704d834af2fc723158446de0861a5c8077d11b7e483f2f277a2e1bfc5a0d93042335043ef1a76af07e71709317eaca015e07899bd09352810cc0b37d4d23b4f4db754f9cff8bd4d1bfe59d0f8dbf58d25be617584c2670a099e8f2032736dd6b8e7680fbb19d03906b58d6b2ac5bde6780bd21e3aa97f603621392a939cf3906418528029f2663a162f5d156bb3617599f5d2340f6d339f805a57c176aa23dbc4321eb8e0ab4c891ab8c3cecc9849ed4c9ee207fd6e63535163c90ea9a749c149c5d426e6d617100bfba172df6cbcd41e00f5b3b22af5dd8192c488322c505252f10001e60a37580f2f82c96e60fbddc628f3c297d9adbf0014b8930ce532e7fc4a934b04f75599294f19d1f10e91d47b0109bc454009c134815a0cf3b38cbf60275f25f7e8933d1edef80ae7c2ed5fd1679a1b41735b8dbf49c2687e12707bf2ad166349d7bcb7257696ccf8ed555dd073385fba0dfdc508edfed45a1ab37f5be3170f16fe1fef0dcc3206b95bbeefe9437729db03bda08f35068164664915c6d861b9b9605fca2fabe4073d4768b2c54af34445f14a19e6ed1512874cb7976a44bef8fabac05006cc69bbeacb0e1fb97569acebfee4b8d999f793386bf7175b4dea6ee100c3f427fff576e645f3c42068add91aae7a863d33a3a14c7ed8f617e6368d77855c1f0f465a7a8ffb07b6599c98bea81ebf24bb045a31b4a55bfbcae813b936ad1746296bc4bd7676f0ed0fd4fb5db194fd15781efe8ef59c3c7c43e46de58b52c42904bd9dd8192dc8a3d59fc7188297feb7f17fb7f9527a93bea69fb93a50bfa82302a141a18640dc8d4c397dde45033f835e4039616e75534c7739bf68efc568d526504f921084e781a26869c1bdff8ee0f3edd9efef90567ac99497751607d1c42969a3f2d9a4609929fd95e629206c517392193c27ec568b6fb79468579632842cb098e7d132946b6b89ec0154ffe8a7546bee70cc327dac6ba2403e122c670c2730046b622c452a23a7a6a703c443099baadc9d388b127300d5455a8e9121f205da72526dc14c99078650ead480fb8ca0f28aa2192ceba7ccb2271a12d45e921846b7f7a4790d81db00ea21462e2c5b90a00a3416a45861c99054ceb31ea2362f5062d5e457c5719a979573d248920a1b17f55d05c910ecaeba2cb560f1028828085f5af9c5289241d0d8c08c5610188955da49e8e8cea699827cc983580c4a1cf993a06212fd64b0c0d9fb64228a3a1d7e4b3b68c4b85e8ec492f92f4d43550dd657380f99c612e3a1ddbbb36de32c0eef8a1a0226f85bc5f57eb30348bfe319fbf90486296abebd6cf86ecb76dd689a88a24626ba80fae70c2aad283aa3c311d5bf365f7dde757264e7f870a16c5a4e5283f320b37f9c50acfa0b7d33c1fa2655afa75b5abdc9ea93bc5895dc57985cbc456a7c2b850c1e410b6e437c582818d6fef17ebf6b5b5678487048794686a459f8661a8a63a8c11d910eb0e2c6b30562a5c46398ae72b117bb87fc2ee4d430c22af29d54ac0ca8f021299585ab7806af6ef1c8e7ecb66d964e1f4780e75b00756eef084648aa08a75448b8f13dcd1866c58bea4fd83a772f800efd20ef1f30e27b82a50cc1f1d637e50320048e2c16e4331fb3e71fc1b863d2b9b91bc88a125363534aecbd685a6be96644923a9e1b9c0895d28dad73e0645957c4d14ac93ac8d42d803bff4f13b24cb35941e80c080f08b13da4406a66aa2beabe47181e4d9bda15aa08f387c5287a9df6f852261402b7cd2eb4cbae11357e5c77423baa7051f9c88674a4abf57dc501b63e1ea1073a493dc77bb1d7f4b1ffb5ac3f3dafc0276cc0cd498da0f226e53c673f0ea127510e0e5c4ce3d8fc0f8e604db044abe10394e3ee8e2b27ebc0b616bbb6c4b51067ef97195942481302ed8c200dfb3edc2e95e5d0de8aa96ec6bee8736abe1f19b24ad3c64620714df93e77ff3acb87913cb78f189abbcdecedfd0af7a17e402e5fdf2157ff3cf9f4e345b5788e51a6c12e42120ba7c811329471eb5957727d00000000000000000000000000000000000000000000000000000000000000000d7ea14ff352d604c7340690a43212bd845d59590ac14e9e6f5078eafa5a4b911a174226d4a67f1c668934cac9b6078385a989ea5e1d07af14f147154ec154252e7dee49faa58b4124c64464e659dc0b3d1f7b66024b916eaa3608827cfce19205ffe21b73ad3138f3f934d364db3453bed6d418887d64257548967c328d0e0c1e5843b8e6a0a8f53c9c850d4f0658039549b6afce4991c0d7bd5c73b6c7b2e3187619a41ede8e4763944b9863f34b35e5edef1dfbf2ff59f75b8053881b62e225631b82969b96f7c7a0365f29ed88a6c8feda1daed0d821dee47eb1adba83941f548673e4d880e2c9b967ef087d3bd8d0a447756f592fb8b5d4bf1e28d3af001f341d5a151189c4887d06ed1188f61c8137d71bdcd110e92f05e969f424c94a305b808a288ee7b04e885be53ee2ea6d7b74d068875ecd68bbbed3b8b7d425b71077825afb12b885d7427c262b9bd22f1e0c7f89233f910bec0e5dfe636f176710dedf5ff9733488d4ff88de32b19d57313c2488f2467afc851196208cb3b90f21315148edc79dcbecc39c9342e6ae84f46eec110f730deafd9b583ff2ed897f0bed711117eaf2cd2bb8d9437ae0885c4f7bd68aeb6fe9d1b5f6c60317932a741503b4d906bdd49ae521b1c63d22dfaeb37e16fa5013a0a4bd69dda04f9a3dd915fd2ee75620c59d1697c23b849a1393d858748cf4954afe3a8230a7b4708d3e11b80ca75a3186729610cbcb1f4565f891f5a98f27abc4354324ddb84745507d1f47c310ff9cb2e5dbeb3b59e91e00f1e27f3e093f3514e54ce2e491485737bc26cd384609f6447340532a3581e7e6f0997ea6c49b8509d334f29f4855da064a0666f107b10963715f2a790a2085599633faaf1f361295daa99855eef03427f72d97c564872565b2dfc01b101524bb4ded299dc8ef812d9c40a9abb8825727c111afc4e04567d890e4ab5ddce0a1b6603e9e696b483693a8f97acf05ca9da1b205fff2201464f4bb4cfc5fa3a70c14323dde8bf922cb56ac9b8a177da083316c106b715af98bac66ededb3970553cc5af5ee8eca493c0853f6cfe799e200c653008a0b0c58639309f9f844d13a42f198c8e43c3e6f8567b44ee8c2d02785bb721398fbf5542631fb4f9e7eda2c650a043584c9ff7930f342a5fff31e5366a0030182e837821ffcb2f34ece32d94b7220b2c9054aa2968a9318c36cb72427123b0fb289e3df67de22cc4376f912b1b7c9e867a2be015545557f2d764300c749ad2690600a7bc5baa2d047b16122476dbc7f8aff807f01f95aef27acb284eda9ca0173fd4db2a68206fa4854c3079f6fcd1f0ac7d6a0e80cb521962b42cdf417b6277eac373218b8bbd6386f0b145fccb5e0f2f896cd861e9359e1653ff5d3ba4b","transcript_type":"EVM","split":null,"pretty_public_inputs":{"rescaled_inputs":[],"inputs":[],"processed_inputs":[],"processed_params":[],"processed_outputs":[["0x0bb1c5cb26ffac7e1deedd8f3262920b1fd79ce2a0aae38b0ff7b04a1ab6b239"]],"rescaled_outputs":[],"outputs":[]},"timestamp":1717810043845,"commitment":"KZG"}
```
## Output (Onchain)
The data returned is a JSON dictionary in the format:

```json
{"processed_output": "000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010bb1c5cb26ffac7e1deedd8f3262920b1fd79ce2a0aae38b0ff7b04a1ab6b239", "processed_input": null, "raw_output": "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000000000000000000000000000000000003c5720bf000000000000000000000000000000000000000000000000000000003cd1346c000000000000000000000000000000000000000000000000000000003c4b4818000000000000000000000000000000000000000000000000000000003c61a0ba000000000000000000000000000000000000000000000000000000003d2c19fe000000000000000000000000000000000000000000000000000000003ce7639d000000000000000000000000000000000000000000000000000000003a27ffb3000000000000000000000000000000000000000000000000000000003c86ff8f000000000000000000000000000000000000000000000000000000003c81bf91000000000000000000000000000000000000000000000000000000003c25f67b000000000000000000000000000000000000000000000000000000003d081393000000000000000000000000000000000000000000000000000000003cbd2be9000000000000000000000000000000000000000000000000000000003cd83508000000000000000000000000000000000000000000000000000000003d7579a1000000000000000000000000000000000000000000000000000000003d095f1e000000000000000000000000000000000000000000000000000000003c8539cb000000000000000000000000000000000000000000000000000000003cdacc1e000000000000000000000000000000000000000000000000000000003c2b24a5000000000000000000000000000000000000000000000000000000003c506f1f000000000000000000000000000000000000000000000000000000003d06f3db000000000000000000000000000000000000000000000000000000003ca5b027000000000000000000000000000000000000000000000000000000003d0946d6000000000000000000000000000000000000000000000000000000003d9070bd000000000000000000000000000000000000000000000000000000003d179aa5000000000000000000000000000000000000000000000000000000003caa561c000000000000000000000000000000000000000000000000000000003d19eda0000000000000000000000000000000000000000000000000000000003c898523", "raw_input": "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000003d5720bf000000000000000000000000000000000000000000000000000000003d4b4818000000000000000000000000000000000000000000000000000000003b27ffb3000000000000000000000000000000000000000000000000000000003d81bf91000000000000000000000000000000000000000000000000000000003d25f67b000000000000000000000000000000000000000000000000000000003dbd2be9000000000000000000000000000000000000000000000000000000003d8539cb000000000000000000000000000000000000000000000000000000003d2b24a5000000000000000000000000000000000000000000000000000000003d506f1f000000000000000000000000000000000000000000000000000000003da5b027000000000000000000000000000000000000000000000000000000003daa561c000000000000000000000000000000000000000000000000000000003d898523", "proof": "1e8e1e1300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000d400000000000000000000000000000000000000000000000000000000000000ce0112bbc278f0fb0ae64a85954f1719ab90760315e7607eb368c317b642719848d207f6a1d1329341cd8d167e1c4773e863b49a00f891ad0140e7e4a5dc6536e370b42a60ad74fd313f23ffa66bae10084e6c57f5226116f784c2f473ca977ba591d12bcbeb17c4b24809023a3804ea2981941357e6d5882cbdec4a6f6da76885814c8ea44a97834be683a25061469a240e9b90c7a133a48f3a28c7b6694ffd63100012a7834208dc21344f7c7ee342de3c08baed50356ecb3e5684278d2b4aa7005b670843468f191e67f93d95a4fb0d71a23a5976fd2d05beb7e0bfad2ac463710663e0dde8ff5ebe09f0a1b14da3fda3aae9cf6251a022d86cd87acc534f5ca28aaf850edb0ccbdb0ab6aa737ec92ecba59ef7137e3a01f5a11bf04684062c505e084bb03e46878a8f473600745383b89ebe6a03f54884f1952bd838745fb5f18fc6e309b320ccce006b42a7224b03c03231a02354c7d1f28a5df3085800e65142baaf43b2301a90c4473779e5b47784f305240504e110272248ad0678a83e80abf54824ad65f0cb09663a523e2c5f99f65aca98160f2cbf81f78b93232c40017350a43dffa3d7b4b14c3e4aab4747d10cf929d9da3b9347e79d74499a67377082643e1b35a788fffbbc63c0f3581f11d47b0773bfd03c4adfcf6d2b1a258ca2a5aab49d3561f845e3a5d3dbd305e429bb6c03a2430628090be7127c92d1074088126df656ae45631a0a93727704863bd17b85803a850ac80b892c859c867520e342afe9db22fe13c79e7afa5d5266007c175220cd9d4a6475cde657492740a1db3c7ff7980b0a5b95aabd25a216f8cc2209e88eafa61c9c48ba758cd51ba20104ee3253460f8095cba3321338288fb6e87aa270af47a4bf7667bf38052fdde289f4eebd7709a56b71eef0dfd6f05c0c53620ef0fc63cb7c6e7154841663e522fb3498bfae8fd583189213cb8857a39b42fd011e49b837441e2f575f00d3cd610c3647cb4cfdb2b199f2e5970ba80abb0da8449c1fd5278652a96b1307fb7a31c79eed8033b7406a1d8f336d23cd9355d14ce9afe3bf58cbf26e02087b7ee582d61d755d0d38b80e550b68f0b5464407af35839f0ab3542cd067bde3dd98612031229b32c8b63e6de7d22ec6f20bad3d78ecfbf0826cba49033f394110b95402061aa9d020ce631315c890ab2f2616993552201870406d86a840f090bb6ac6f1294a2159e8c23a40128c2c94ebbeb65e56c2025822b646f575243641d0760db07642ce1c816cf1a920bb292088a0ecaaf4e1b2fe916451c3cf982ee024cb3b60554f3b85d91c9fafa0e14070be494c0c06c6a44c97e24abadf8869934a4afcc0509cd3c7537c320ef4f6eff4aa526b60d61fb9125d4abae13409afc578e24fb07f66df6230d5ec0191b83b99e3f055fd64a2a152381e50576c2d3f8303bc5a027bafbaa8b52b4b6b86f4d65df873a669779651022d3020e301e0fdbb22da69e1dda00979c8449d6313ff9fba188d92277d5d050dd16c3ec79065fa10a80f8f73002cc2bc3441bb3336f1d3de593dec5c87e8b46e28d738d4102fe0a4cf5328e1b075cc2d7e56af6336917dc275831ed0dde3cab297ed0b3e468a8aba9692e2b0e4e735ee98f65cd5449df74f5da01ca4a2bb58ac6303447aea6d1dd24bfbe3d1ad6dd50d21534a88ba254ac99f47510062732c747e85d6f4cc380ce01d052811601219af8e3b854e4572e34b796f4f4756690dd6663fb40e3be36e37b599ad40b84fc9c0ab2eab8a8c5cbfb2bf8a1262b667acee4a71ab5d25d75a2e0240184020513c1e572a76b68ab2c434d470beeec8501c8c53360c382c840a3770a41062eb3ee1bf3cb55a3339aab9ed993116143c4b84e1eaf8abc830668ca2eb7dbb32ffd4c00cfb27b087e02358977944f6a990ac881fbedda8fd05504d16a4c9c1d19694446ada05790227a2acf6deafbf983e255ed073e86bec37a9439df033e8108c6731a2267b1d06de62fbb7c795bf6894e4cdc8bacf7020c4d1e2f7942399a2f706730bb3efd1f078e15cfda0a4d6bf18e8dcf6deb8aa6cb2ba787e44a26cd1e93c0c3a7db32c64e3dd609294a83281831e116c8014d0c7c45424675354f4d065c8538f52a6e41ec54512df5817cd2b01def9b583bd9741e187f228669aae2193b47e52446700bce0d08496cf243a117dafbdbdd1be3bd2afe0374425abd230d2574738d32a18cddb48ebdbfeaae7d525f5ebae88f3ae81aefad92f15bef64045b6fdff85a0d1d168d1e025ba488f026ad5fc8ad0e4aef26bcdf7bb41bc40e088a8c90672b1b4d7c3cebce462ddd8f743ce993772573d8736241b0a1802e1313f53668c576fd879bc239b9378781628bd3606967f501645a06e847bc8c67510bc395d048aec02eed085fc12032e3ad7142bafc04d8d339a7a426923e74745a042c3df20b78e9d86c930d5f4545b44894fd186f043176e05f72384a238ad86d192ed8425381004ae68dfeee3131a6b495af502408da34388d5f20a83dc6aa2e03c81d8439ebf70ecae192a122b4389d5a8f7903d9235d497061ae391251d9571dc078f64ebc2f6fb55f38c9f64434b59c5f91b93ab213f95fc2b5ec7aba29cd29ef2d1be68ab4fdbb8dfa39d44472f1a0025cc0d774466c8b4909ae57162b6028337d0fca6c0d2d8541df11b9c401b5d99f4fc90a4a6c67870ac179185f59ef0507b17bfeb4e6b39effd76b054d2c47293451cd479c9c1937060547c4ed780f1fe0a3b0593dc667976826645c46d20019246ad6b4c7e10cfa4be5cfa129b403026e850fd815a1c76daaef78a8d9db3d823de066c483901ef8c8910fd6ca572f0afaefe150bcc0cb03e7d5da2b7f3837acf71dc6f2588e3beb975205afedd3521a743696e0bcbc3ec163f2e0a25294d20fdfb03c4f1d342e80b93b9f5abb846a2f8ccf5e76ebc29fec86745bdd8d273f351f3cabf9d6dc2ad112c259a2e2ebb00e7f73c63744c012c6d1d71dd8eb86e3d3d859eb4fb06d3a4a4f8de38d193c4c1be34eacd4e43ffd100977cce939b332ffcb2eb9f84e3aaf8a033054d1f3c5520b8775768d2629bbff00335f12839bb1d8d5b311146d80ac261054834cdd8115144a3c414d1bf0236d35a1adb593e67e9d94ffb18d8ac1aabd7e96cd1ac20042121cd6a89904bd7f1dbeb7b0805b43d774bd7f71aca0e83f55a466ccb332e5d900000000000000000000000000000000000000000000000000000000000000001e0670bdd845989166e8d3eee44601b17dd80fdaf5df7b3d2895b15872b00dac01f5ae9986175558b75c2c67ee914f71e08f960e34acd35d7ea341489838ed54290c174ccf4d1b535290abc08bdfe4af39ce73d4b1d359b7b099384a30be0831062572367522ce1208bf0ad5b63e69f299e485b28c82bde5f63b9117691fe2a71059a0f1d5ed3cb77d176b6b9d460ed2cc022f5981e3c2939395c4abf76771902c4a6e687a0ee655391759e808867e0a5e5f0857d058471a665071ce7c555d79231922acba4641c4e9b38f26d218567af37b27f0aad47ab035c229e65ccbc8340acb46fabf0f5949d47dc05f7e3969bec761a10fb62cfde8b4eac97995b5314121ec277a3280703a7ee8ab71b84588e26f89be3f4237f7ba5866c14a546e95b62a9c6afe0c7bddc6ec014b7d577648179a3c40c105ee96dcf201a84a546a3cd419edde006a6a2b0f612e9bff6059a37130bacb249a6ece642fe0d7f869b15bc82a49db9e709f18b8b6649db39eff8a18382037e605992b18189f4ff4c2357338249155ae4bc479dc418b835cd45725e01c08c0d4c9d46530158a8094bba24c4d0e8a3ed171543d57fa5ce53e0b54cbb2b5ca6387d4fa296f38cddc32fc83d1ae281c31ddc17919aa01a5e213c0c25eaf70832496f834e92aa3f284bfa3f856f80078fd2ef517bb1c19b5bcecfe88f597ce52e72a225e733e95c343db8ed8b1c6234a2aae46f678e3feaadd1896874290d1eb12730ba8f4352c97b3a26a56d63b2f5e765171b2743ac45fab2fbddfb3bd412d9469dd0d9f68646d55a57caf9ef610f277aff0ffdac1ec99706ada325486fdad978cb4389ce8718bfb7bb2a7598b2df4addbdb669f40a24884a0d387f3ffadc1334f46e9c0240d65fa0466aaa8121f0f585e68fbda564f744f286a3f0fcbb58a50853000117ec2a192843dfbce3602c8b168c3ff79ab3b8fc76447ffc8d2cd7a7f692317d5c1d97212b5aa872d0e0f84175f202542f0b83d774ccdd89580ddd64d793b43c60618977e413106208c144297ca1647e54404a2713d5a4d0d4b248ec0866d57a4e8ef05d5d0399ef982056d86ca3fbff616482dc85992a93865289ad446c4e73baf91307337dea48c5501bf6cbd731571ffb209afb9c23938e43ace7f0e608da62ede7a7efd883ef1e0008787ff7f3173056f9b3fba2788a5f0a1860d95347df84df72c360444270f521edc55c1679fba04949522b8426c03f8600a96f9fe0d51757c76851c9cb0a1c1234c755bce8238813e954c05729ad30f0a7a7bf4b1f69750fad0a6a31b5b9c51099074c76d8d74ede041e75e8882e541c1cf6a504c1aaf7d26778da05a6dce4c2d7b48833afde7bcfe4b7f021bc59cfbd588d06cb328492987888d8984ff6c0500000000000000000000000000000000000000000000000000000000000000010bb1c5cb26ffac7e1deedd8f3262920b1fd79ce2a0aae38b0ff7b04a1ab6b239"}
```

# Building the service

You can leverage the Makefile in the repo root directory to build the service's docker image:

```bash
make build service=ezkl_proof_service
```

# Configuring the service

The service is configured via environment variables. See .env.example for more details.


# Launching a Deployment

With an image built, you can deploy the service along with an Infernet node by running (from the root directory):
```bash
# source = 0 means artifact is expected to be on local disk
make deploy-node service=ezkl_proof_service env='{\"EZKL_PROOF_MODEL_SOURCE\": 0}'


# to stop the deployment
make stop-node service=ezkl_proof_service
```
You can use curl to send an request to the node:

```bash
curl -X POST http://localhost:4000/api/jobs \
     -H "Content-Type: application/json" \
     -d '{"containers": ["ezkl_proof_service"], "data": {
            "witness_data": {
                "input_data": [
                    [
                        0.052521463483572006,
                        0.04962930083274841,
                        0.0025634586345404387,
                        0.06335366517305374,
                    ]
                ],
                "input_shape": [1, 4],
                "input_dtype": 0,
                "output_data": [
                    [
                        0.013130365870893002,
                    ]
                ],
                "output_shape": [1, 1],
                "output_dtype": 0,
            }
        },
}'
```

# Running Service Locally
It may be helpful to run services locally. To do so, you may call the following make target in your root directory if the image has been built:

```bash
make run service=ezkl_proof_service
```
